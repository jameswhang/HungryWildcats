$(document).ready(function(){$(".menuChoices").hide(),bindClickFunctions()});var bindClickFunctions=function(){$(".submit").click(function(){var e=$(".money").val();isNormalInteger(e)?($(".userInput").fadeOut(400,showMenus(e)),$(".header-padding").fadeOut(400),$(".header").fadeOut(400,function(){$(".header").fadeIn(400,changeHeader())})):alert("You can only put in numbers!")}),$(".more").click(function(){$(".btns").fadeOut(400,function(){$(this).remove(),showMenus($(".money").val())})}),$(".home").click(function(){location.reload()}),$(".restaurant").click(function(){resname=$(this).text(),$(".btns").fadeOut(400,function(){$(this).remove(),showMenuFromRestaurant($(".money").val(),resname)})})},changeHeader=function(){$(".header").html("<h1>Here are some things you can eat!</h1>")},showMenus=function(e){var n=Parse.Object.extend("EvanstonMenuExtended"),t=new Parse.Query(n);t=t.limit(1e3),t.find({success:function(n){if(1e3==n.length)t.skip(1e3).limit(1e3).find({success:function(t){var o=generateRandom(n.concat(t),e,10),s=formatOutput(o);s+='<div class="col-xs-10 col-xs-offset-1 col-sm-4 col-sm-offset-4 col-md-4 col-md-offset-4 btns">',s+=showMoreButton(),s+=showHomeButton(),s+="</div>",$(".menuChoices").append(s),bindClickFunctions()},error:function(){alert("Oops, we hiccuped!")}});else{var o=generateRandom(o,e,10),s=formatOutput(o);s+=showMoreButton(),$(".menuChoices").append(s),bindClickFunctions()}},error:function(){alert("Oops, we hiccuped!")}}),$(".menuChoices").fadeIn()},showHomeButton=function(){return'<button class="btn btn-primary home">Home</button>'},showMoreButton=function(){return'<button class="btn btn-primary more">More</button>'},showMenuFromRestaurant=function(e,n){var t=Parse.Object.extend("EvanstonMenuExtended"),o=new Parse.Query(t);$(".menuChoices").empty(),o.equalTo("RestaurantName",n),o.find({success:function(n){var n=generateRandom(n,e,10),t=formatOutput(n);t+='<div class="col-xs-10 col-xs-offset-1 col-sm-4 col-sm-offset-4 col-md-4 col-md-offset-4" sytle="vertical-align:middle;">',t+=showHomeButton(),t+="</div>",$(".menuChoices").append(t),bindClickFunctions()},error:function(){alert("Oops, we hiccuped!")}}),$(".menuChoices").fadeIn()},generateRandom=function(e,n,t){for(var e=shuffle(e),o=e.length,s=[],a=0;o>a&&s.length<t;a++){var r={},c=e[a],i=c._serverData.ItemPrice,u=c._serverData.ItemName,m=c._serverData.ItemDesc,l=c._serverData.image_url,d=c._serverData.RestaurantName;i>n||(r.name=u,r.quantity=Math.floor(n/i),r.where=d,r.desc=m,r.img=l,r.price=i,s.push(r))}return s},renderMenu=function(e){return'<div class="col-xs-12 col-sm-12 col-md-12 menu"><div class="col-xs-2 col-sm-2 col-md-1 menu-img"><img src='+e.img+' class="img-circle" width="60px" height="60px"></img></div><div class="col-xs-7 col-sm-8 col-md-9 menu-name"><span>'+e.quantity+" order(s) of "+e.name+'</span></div><div class="col-xs-3 col-sm-2 col-md-2 menu-price"><span>$ '+e.price+'</span></div><div class="col-xs-7 col-sm-8 col-md-9" style="padding-right: 0;">from <span class="restaurant">'+e.where+"</span></div></div>"},formatOutput=function(e){var n,t=e.length,o="";if(0==t)o+='<div class="menu">Nothing for you to eat!</div>';else for(var s=0;t>s;s++)n=e[s],o+=renderMenu(n);return o},isNormalInteger=function(e){var n=(e.match(/ /g)||[]).length,t=(e.match(/\./g)||[]).length;if(n>=1||t>1)return!1;var o=/(?:\d*\.)?\d+/g,s=e.match(o);return null==s?!1:!0},shuffle=function(e){for(var n,t,o=e.length;0!==o;)t=Math.floor(Math.random()*o),o-=1,n=e[o],e[o]=e[t],e[t]=n;return e};
